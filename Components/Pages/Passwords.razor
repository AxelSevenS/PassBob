@page "/passwords"
@inject PasswordDatabase Database

<h3>Gestionnaire de Mots de Passe</h3>

<button @onclick="AddPassword">Ajouter un Mot de Passe</button>

@if (passwords != null)
{
    <ul>
        @foreach (var password in passwords)
        {
            <li>@password.Website - @password.Username - @password.EncryptedPassword</li>
        }
    </ul>
}

@code {
    private List<Password> passwords;

    protected override async Task OnInitializedAsync()
    {
        passwords = await Database.GetPasswordsAsync();
    }

    private async Task AddPassword()
    {
        var newPassword = new Password
        {
            Website = "Example.com",
            Username = "user@example.com",
            EncryptedPassword = EncryptionHelper.Encrypt("password123")
        };

        await Database.SavePasswordAsync(newPassword);
        passwords = await Database.GetPasswordsAsync();
    }
}