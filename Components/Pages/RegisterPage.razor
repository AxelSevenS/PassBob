@page "/register"
@inject NavigationManager Navigation

<h3>Créer un Mot de Passe Principal</h3>

<EditForm Model="@user" OnValidSubmit="Register">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div>
        <label for="masterKey">Mot de Passe Principal:</label>
        <InputText id="masterKey" @bind-Value="user.MasterKey" type="password" />
    </div>
    <button type="submit">Créer</button>
</EditForm>

@code {
    private LoginModel user = new();

    private async Task Register() {
        // Save the master password securely (hash it before saving)
        // For demonstration purposes, we'll just set it in local storage
        await SecureStorage.SetAsync("MasterKey", user.MasterKey);
        Navigation.NavigateTo("/login");
    }
}